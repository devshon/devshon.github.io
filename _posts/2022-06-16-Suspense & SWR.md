---
layout: single
title: "React18 Suspense"
categories: FrontEnd
tag: [total, react, swr]
---

# Suspense, ë‚˜ì˜ ìƒê°

> ë¦¬ì•¡íŠ¸ 18ë²„ì „ì´ ë‚˜ì˜¤ë©´ì„œ í¬ê²Œ ë°”ë€ ê²ƒ ì¤‘ì— Suspense(ì„œìŠ¤íœìŠ¤)ëŠ” ìœ ë… ëˆˆì— ë„ì—ˆë‹¤. ì„œìŠ¤íœìŠ¤ëŠ” ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¹„ë™ê¸°ì‹ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ pending ìƒíƒœì¼ ë•Œ ë™ì‘í•˜ê²Œ ëœë‹¤. ë¬´ì—‡ì„ ë™ì‘í•˜ëƒë©´, Spinner ë˜ëŠ” ë¡œë”©ì´ë‹¤.
>
> ê¸°ì¡´ Promise allì„ ì‚¬ìš©í•˜ê±°ë‚˜ ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ìƒê¸°ëŠ” ë¹„ë™ê¸° ë°ì´í„° ì²˜ë¦¬ë¥¼ ë¬¶ì–´ì•¼í•˜ëŠ” ë²ˆê±°ëŸ¬ì›€ì´ ìˆì—ˆëŠ”ë° ì„œìŠ¤íœìŠ¤ë¡œ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ì „ë¶€ ë¬¶ìœ¼ë©´ ë‹¤ë¥¸ ì¶”ê°€ë™ì‘ì„ êµ¬í˜„ í• ê²ƒë„ ì—†ì—ˆë‹¤.

---

# Suspense ì‚¬ìš©

### ì§„í–‰ìƒí™©

Todo Listë¥¼ ì£¼ì œë¡œ ì‚¬ìš©í•´ë´¤ë‹¤. ë‚´ê°€ ë§Œë“  Todo ListëŠ” ìƒë‹¨ì— ì—ë””í„°ë¡œ ë“±ë¡ ê¸°ëŠ¥ì´ ìˆê³  í•˜ë‹¨ì—” **ì§„í–‰ì¤‘ì¸ ì¹´ë“œ**ì™€ **ì§„í–‰ì™„ë£Œëœ ì¹´ë“œ**ë¡œ ë‚˜ëˆ ìˆë‹¤.

ë‘ ì¢…ë¥˜ì— ì¹´ë“œëŠ” ê°ê° ì»´í¬ë„ŒíŠ¸ë¥¼ ë¶„ë¦¬í–ˆê³  ë‹¤ë¥¸ apië¡œ í˜¸ì¶œëœë‹¤. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë°ì´í„°ê°€ ëŠë¦´ê²½ìš° ê°ì ì¶œë ¥ë˜ëŠ” ì‹œê°„ì´ ë‹¤ë¥¼ ê²ƒì´ê³ , ë‚˜ëŠ” ê°ê°ì˜ ë¦¬ìŠ¤íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ apië¥¼ í˜¸ì¶œí•˜ì—¬ ë¶„ë¦¬í•  ê²ƒì´ê¸° ë•Œë¬¸ì— `Promise all`ì„ ì‚¬ìš©í•˜ê¸°ê°€ ì–´ë µë‹¤ê³  ìƒê°í•œë‹¤.

![screencapture-5364911](/images/screencapture-5364911.png)

### ì„œìŠ¤íœìŠ¤ ì‘ìš©

**ğŸ“Œ ì½”ë“œëŠ” ê°€ë…ì„±ì„ ìœ„í•´ì„œ ë¶ˆí•„ìš”í•œ ë¶€ë¶„ì€ ì œê±°í–ˆìŠµë‹ˆë‹¤.**

ìš°ì„  ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ì— Suspenseë¡œ ë™ì‹œ ë¡œë”©ì„ ì ìš©í•  ì»´í¬ë„ŒíŠ¸ ë²”ìœ„ê¹Œì§€ ë¬¶ëŠ”ë‹¤.

```tsx
import { Suspense } from "react";

const Todo = () => {
  return (
    <Suspense fallback={<h1>loading...</h1>}>
      <Editor />
      <List />
    </Suspense>
  );
};
```

Todo ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì— List ì»´í¬ë„ŒíŠ¸ì…ë‹ˆë‹¤. ì•„ë˜ì½”ë“œë¥¼ ë³´ë©´ List ì»´í¬ë„ŒíŠ¸ëŠ” í•˜ìœ„ì»´í¬ë„ŒíŠ¸ì¸ Item ì»´í¬ë„ŒíŠ¸ë¥¼ ê°–ê³ ë§Œ ìˆì„ë¿ ì˜ˆì™¸ì²˜ë¦¬ëŠ” ì—†ìŠµë‹ˆë‹¤. ë‹¤ë§Œ Item ì»´í¬ë„ŒíŠ¸ì—ì„œ ì§„í–‰ì¤‘ | ì™„ë£Œëœ ì¹´ë“œë¥¼ êµ¬ë¶„í•  ìˆ˜ ìˆëŠ” í”„ë¡œí¼í‹°ë¥¼ ë„˜ê²¨ì£¼ì—ˆìŠµë‹ˆë‹¤.

```tsx
const List = () => {
  return (
    <div>
      <h1>Progress</h1>
      <Item type="progress" />
      <h1>Completed</h1>
      <Item type="completed" />
    </div>
  );
};
```

Item ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” SWRì„ ì‚¬ìš©í•´ì„œ ë„˜ì–´ì˜¨ `type` í”„ë¡œí¼í‹°ë¥¼ ì—”ë“œí¬ì¸íŠ¸ë¡œ í™œìš©í•˜ì—¬ ê°ê° ë‹¤ë¥¸ apiì—ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì˜µë‹ˆë‹¤. ê·¸ë¦¬ê³  ê·¸ ë°ì´í„°ëŠ” **ì•„ë¬´ ì˜ˆì™¸ì²˜ë¦¬ë¥¼ í•˜ì§€ ì•Šê³  ì»´í¬ë„ŒíŠ¸ì— ë°ì´í„°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.**

```tsx
import useSWR from "swr";
import { fetcher } from "../apis/fetcher";

const Item = ({ type }: { type: string }) => {
  const { data } = useSWR(`/todo/${type}`, fetcher);

  return (
    <>
      {data.todos.map((item: Todo) => {
        return (
          <div
            dangerouslySetInnerHTML={{
              __html: item.description,
            }}
          />
        );
      })}
    </>
  );
};
```

ì´ ìƒíƒœë¡œ ë„¤íŠ¸ì›Œí¬ ì„¤ì •ì„ ëŠë¦¬ê²Œ í•œ ë’¤ ìƒˆë¡œê³ ì¹¨ì„ í•˜ë©´ ì•„ë˜ì˜ ëª¨ìŠµì²˜ëŸ¼ ë‚˜ì˜µë‹ˆë‹¤.

![Jun-16-2022 16-56-27](/images/Jun-16-202216-56-27.gif)

---

# SWRë¡œ ì„œìŠ¤íœìŠ¤ ì‚¬ìš©

SWRì„ ì‚¬ìš©í•œ ì´ìœ ëŠ” mutate ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ì„œ ë°ì´í„° ë³€ê²½ ì‹œ ìë™ ìƒíƒœê´€ë¦¬ë¥¼ í•˜ê¸° ìœ„í•´ì„œ ì…ë‹ˆë‹¤.

SWRì— ì„œìŠ¤íœìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì€ ê°„ë‹¨í•©ë‹ˆë‹¤. `SWRConfig`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```tsx
import { SWRConfig } from "swr";

import Todo from "./components/Todo";

const App = () => {
  return (
    <>
      <SWRConfig
        value={{
          suspense: true,
        }}
      >
        <Todo />
      </SWRConfig>
    </>
  );
};

export default App;
```

### SWRì„ ì‚¬ìš©í•œ ê°„ë‹¨í•œ Drag and Drop

![Jun-16-2022 17-12-00](/images/Jun-16-202217-12-00.gif)

---

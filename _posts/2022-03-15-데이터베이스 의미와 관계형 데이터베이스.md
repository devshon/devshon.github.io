---
layout: single
title: "데이터베이스 의미와 관계형 데이터베이스"
categories: BackEnd
tag: [total, db]
---

### 01. 데이터베이스란?

데이터베이스는 **컴퓨터 시스템에 저장된 정보나 데이터를 모두 모아 놓는 집합**을 의미한다.

#### 01-1. 사용하는 이유

1. 데이터를 오랜기간 저장 및 보존하기 위해서

저장하지 않은 데이터는 컴퓨터를 껐다 키면 사라진다. 즉 메모리에 존재하는 데티어는 오래 보존되지 않아서 **필요한 자료를 계속 보존하기 위해서 데이터 베이스를 사용한다**.

2. 데이터를 체계적으로 보존하고 관리하기 위해서

데이터를 많이 오래 저장한다고 해서 좋은것만은 아니다. 필요할 때 언제든 원하는 자료를 쉽게 읽어낼 수 있어야 의미 있는 정보라고 한다. 데이터를 표 모양으로 날짜별로 저장되어 있다면 찾기 쉽듯이 **데이터를 체계적으로 정리하여 보관하기 위해서 데이터 베이스를 사용한다.**

---

### 02. 관계형 데이터베이스

데이터베이스는 크게 **관계형 데이터베이스(RDBMS)**와 `NoSQL` 로 명칭되는 **비관계형(Non-relational) 데이터베이스**가 있다.

관계형 데이터베이스에서 모든 데이터는 2차원 테이블로 표현할 수 있다.

```
column(열): 컬럼은 테이블의 각 항목 (id, 책제목, 작가, 출판사, 가격)을 뜻한다.
row(행): 로우는 각 항목의 실제 값이다. 2번 행을 보면, 갈매기의 꿈, 리처드 바크, 나무옆의자, 11,520 이라는 실제 값이 있다.
```

![screencapture-7310514](/images/screencapture-7310514.png)

```
각 로우는 각자의 "고유키"(Primary Key)가 있다.
테이블의 가장 첫 컬럼은 항상 id 이다.
엑셀을 보면 제일 첫 컬럼은 항상 변하지 않는 번호(index)가 매겨져 있다.
각 로우는 언제나 고유한 번호를 갖고 있는데 이것을 고유키(Primary Key)라고 한다.
이 고유키를 통해서 특정 로우를 찾거나, 인용할 수 있다.

데이터베이스는 수백, 수천개의 테이블로 구성되어 있다.
관계형 데이터베이스는 각각의 테이블들이 서로 "상호관련성"을 가지고 연결되어 있다.
즉, 각각의 테이블들이 완전히 독립적인 대상이 아니라, "테이블과 테이블이 서로 연관되어 있고 서로 관련있다." 라는 뜻이다.
```

#### 02.01 테이블 사이 관계의 종류

종류에는 3가지가 있다.

`One to One`, `One to Many`, `Many to Many` 라 부르고 한국어로는,

`일대일`, `일대다`, `다대다` 관계라고 부른다.

**<u>One To One (일대일)</u>**

![screencapture-7311069](/images/screencapture-7311069.png)

```
User Table: 이름정보를 갖고 있는 테이블
Identification number Table: 주민등록 번호를 갖고 있는 테이블
```

사람은 주민등록 번호를 오직 단 한개만 가질 수 있다.

- 즉, 하나의 A 데이터는 하나의 B 데이터와 연결된다. 반대로 하나의 B 데이터는 하나의 A 데이터와 연결된다.

이렇듯 각각의 데이터들이 서로 하나씩만 연결되어 있는 경우 `일대일 관계` 라고 부른다.

그치만 여기서 `Users Table` 과 `Identification number Table` 을 어떻게 연결하는가,

바로 위에서 본 `PK(Primary Key)` 와 추가로 다른 테이블의 PK를 참조하는 `FK(Foreign Key)` 이다.

**FK는 외래키라 부르며 다른 테이블의 PK(고유키)를 참조하여 연결하는 키이다.**

![screencapture-7311448](/images/screencapture-7311448.png)

위 그림처럼 `Users Table` 의 고유키인 `id` 를 `Identification numbers Table` 에서 FK인 `user_id` 라는 컬럼으로 고유키를 참조하고 있다.

**<u>One To Many (일대다)</u>**

테이블 A의 로우가 테이블 B의 여러 로우와 연결되는 관계를 말한다.

![screencapture-7311627](/images/screencapture-7311627.png)

반려견은 한명의 주인 밖에 없다. 그치만 한명의 주인은 여러 반려견과 함께할 수 있다.

**`Users Table` 에서 `PK`가 1번인 김코드는 `Pets Table` 의 `FK` 로 `user_id` 컬럼을 사용하고, `user_id` 컬럼의 1번을 갖고있는 로우는 2개인 것을 확인 할 수 있다.'**

![screencapture-7311886](/images/screencapture-7311886.png)

이런 관계를 `일대다` 관계라고 할 수 있다.

**<u>Many To Many (다대다)</u>**

책을 예시로 들면 **한 작가는 여러 책을 쓸 수 있다.** 반대로 **한 책에도 작가는 여러명이 될 수 있다.**

아래 예시를 보자

![screencapture-7312114](/images/screencapture-7312114.png)

위 방법의 테이블은 사용할 수 없다. `authors` 컬럼에 해당하는 로우 하나에 너무 여러 데이터가 들어있기 때문이다.

그렇다면,

![screencapture-7312181](/images/screencapture-7312181.png)

위 방법은 작가와 책 제목의 모든 조합이 한 행(row)에 하나씩 들어가 있다.

그치만 중복되는 데이터가 너무 많다. 그러면 책이 늘어날 때마다 똑같은 데이터를 여러번 저장해줘야 하고 수정하기도 까다롭다. 그래서 이것을 `Foreign Key` 로 해결할 수 있다.

![screencapture-7312289](/images/screencapture-7312289.png)

![screencapture-7312374](/images/screencapture-7312374.png)

위 방법은 사용자 테이블과 책 테이블을 하나로 묶어주는 `authro_books` 테이블을 만들어 주었다.

`author_books Table` 은 **사용자 테이블과 책 테이블의 고유키를 참조하는 FK만 갖고있다.**

이와같은 경우에서 `Authors Table` 과 `Book Table` 는 서로 다대다 관계이다.
